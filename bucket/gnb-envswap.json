{
    "_comment": "This is a template for the Scoop manifest. The hash will need to be updated with each new release.",
    "version": "0.1.0",
    "description": "A TUI tool to quickly switch environment variables in PowerShell.",
    "homepage": "https://github.com/gennobou/gnb-envswap",
    "license": "MIT",
    "url": "https://github.com/gennobou/gnb-envswap/releases/download/v${version}/gnb-envswap-v${version}.zip",
    "hash": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",
    "bin": "gnb-envswap.exe",
    "checkver": "github",
    "autoupdate": {
        "url": "https://github.com/gennobou/gnb-envswap/releases/download/v${version}/gnb-envswap-v${version}.zip"
    },
    "post_install": [
        "$profilePath = $PROFILE",
        "if (!(Test-Path $profilePath)) {",
        "    Write-Host 'Creating PowerShell profile: ' $profilePath",
        "    New-Item -Path $profilePath -ItemType File -Force | Out-Null",
        "}",
        "$funcDef = 'function envswap { gnb-envswap | Invoke-Expression }'",
        "$content = Get-Content $profilePath -Raw",
        "if ($content -notmatch 'function envswap') {",
        "    Add-Content -Path $profilePath -Value \"`n# Added by gnb-envswap installer`n$funcDef`n\"",
        "    Write-Host 'envswap function added. Restart PowerShell or run `. $PROFILE`.'",
        "} else {",
        "    Write-Host 'envswap function already exists in your PowerShell profile.'",
        "}"
    ],
    "post_uninstall": [
        "$profilePath = $PROFILE",
        "if (Test-Path $profilePath) {",
        "    $content = Get-Content $profilePath -Raw",
        "    $pattern = '(?sm)^\\s*# Added by gnb-envswap installer.*?function envswap.*?^}'",
        "    if ($content -match $pattern) {",
        "        ($content -replace $pattern, '').Trim() | Set-Content $profilePath",
        "        Write-Host 'envswap function removed from your PowerShell profile.'",
        "    }",
        "}"
    ]
}
